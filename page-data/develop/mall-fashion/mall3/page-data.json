{"componentChunkName":"component---src-templates-blog-post-js","path":"/develop/mall-fashion/mall3/","result":{"data":{"site":{"siteMetadata":{"title":"Godo dev"}},"markdownRemark":{"id":"def7a832-cd12-5dc5-acc1-b6fec414d568","excerpt":"도입 배경 현재 프로젝트는 코드의 통합을 위해 feature 브랜치에서 작업 후 develop…","html":"<h2>도입 배경</h2>\n<p>현재 프로젝트는 코드의 통합을 위해 feature 브랜치에서 작업 후 develop 브랜치로 병합하는 방식을 사용하고 있습니다.로컬 환경에서 테스트를 모두 통과했을 때 병합을 하는 것을 규칙으로 하고 있는데요. 이것을 강제할 수 없다는 문제점이 존재합니다.</p>\n<p>이전의 코드 통합시 테스트를 실수로 잊어버리면 다음 기능을 구현할 때 번번이 버그가 발생하고는 했습니다. 그리고 이는 빌드 실패로 이어지기도 했습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/034815bcbbd95f0d74ddc186f9fb0fd4/874d1/mall3-error.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAABYlAAAWJQFJUiTwAAABBklEQVR42lWQa26DMBCEOUjzrNoEgzHGxuZNEooSSNre/zTTZaNW6o+VpV3PtzMbRDKFNAb9MGK6f+E6PdCfPyBiBW1LWKPQ5Rkq7VBmOZrujLa/QBuHSGrEiYZUGRKlEUYJggUopELRtrhNnww8XUb4soFxJX+SykClliELINU5BPXfDwK7/RteVlus1jusN3sEMQEPMoHvnsCy7uCKml/rKwaKSDHQWM+lyakkcO4qnm22rwxjoCCgJctl02IYJ47bnQaKNcCS4Cgki40t4HyNuunhaaEvGl4SiqfTP4dhnKJ3BebbHfPjG+N15riC+hlBllsugpDAS5p4uRvVMZT/ov66/AGYy56IXgz6vAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"mall3-error\"\n        title=\"\"\n        src=\"/static/034815bcbbd95f0d74ddc186f9fb0fd4/f058b/mall3-error.png\"\n        srcset=\"/static/034815bcbbd95f0d74ddc186f9fb0fd4/c26ae/mall3-error.png 158w,\n/static/034815bcbbd95f0d74ddc186f9fb0fd4/6bdcf/mall3-error.png 315w,\n/static/034815bcbbd95f0d74ddc186f9fb0fd4/f058b/mall3-error.png 630w,\n/static/034815bcbbd95f0d74ddc186f9fb0fd4/40601/mall3-error.png 945w,\n/static/034815bcbbd95f0d74ddc186f9fb0fd4/78612/mall3-error.png 1260w,\n/static/034815bcbbd95f0d74ddc186f9fb0fd4/874d1/mall3-error.png 1310w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div style=\"text-align: center; margin-top: 5px; margin-bottom: 20px; font-size: 14px;\">\n  쿠폰 기능을 개발하다 발견한 스토어 도메인의 버그\n</div>\n<p>이러한 문제는 개인 프로젝트를 진행할 때는 다음 피쳐 개발 때 fix하면 되겠지라고 안일하게 생각할 수 있지만 실제 서비스는 다릅니다. 여러명의 개발자들이 협업하는 상황에서\n이러한 문제는 다른 팀원들의 작업에 영향을 주고 전체 프로젝트의 안정성에 악영향을 줄 수 있습니다.\n또한 이는 git-flow 전략을 따르고 있었던 현재 프로젝트의 브랜치 전략을 위배하는 것입니다. develop 브랜치의 코드는 항상 안정성을 유지해야 하기 때문입니다.</p>\n<p>이러한 문제를 해결하기 위해서 프로젝트에 CI를 도입하여 <strong>작은 변경사항을 지속적으로 적용</strong>하되 develop, release, main <strong>브랜치의 안정성을 지키고자 합니다.</strong></p>\n<h2>CI 란</h2>\n<p>지속적 통합 (Continuous Integration, CI)은 소프트웨어 개발 과정에서 작은 변경 사항들을 자주, 그리고 지속적으로 기존 코드베이스에 통합하는 개발 방식입니다. 이 접근 방식은 개발 초기 단계에서 버그를 발견하고 수정할 수 있게 하여 소프트웨어의 품질을 향상시키고 개발 속도를 높이는 것을 목표로 합니다. CI는 주로 빌드와 테스트 과정을 자동화하여 개발자들이 수작업으로 해야 하는 귀찮음을 줄이고, 코드 통합 과정에서 발생할 수 있는 충돌을 예방하는 데 도움을 줍니다.</p>\n<h3>1. 지속적인 통합의 의미</h3>\n<ul>\n<li>CI는 코드 변경 사항을 빈번하게(하루에도 여러 번) 메인 코드베이스에 병합하는 것을 말합니다.</li>\n<li>각 병합 시마다 자동으로 빌드와 테스트가 실행되어, 변경 사항이 기존 코드와 잘 통합되는지 확인합니다.</li>\n</ul>\n<h3>2. 장점</h3>\n<ul>\n<li>충돌 예방: 작은 단위로 자주 통합함으로써 코드 충돌을 줄이고, 팀 간 협업을 원활하게 합니다.</li>\n<li>빠른 피드백: 코드 변경 후 즉시 빌드 및 테스트가 실행되므로, 문제를 조기에 발견하고 수정할 수 있습니다.</li>\n<li>높은 코드 품질: 자동화된 테스트를 통해 코드의 안정성을 유지하며, 배포 전 품질을 향상시킵니다.</li>\n</ul>\n<h3>3. 자동화의 중요성</h3>\n<ul>\n<li>CI의 핵심은 자동화입니다. 수동으로 빌드와 테스트를 실행하는 것은 비효율적이고 시간이 많이 걸립니다. CI 도구를 사용하면 이러한 과정을 자동으로 실행할 수 있어, 개발자들이 더 중요한 작업에 집중할 수 있습니다.</li>\n<li>자동화된 빌드 및 테스트는 변경 사항을 즉시 검증하므로, 버그나 오류가 발생했을 때 빠르게 대응할 수 있습니다.</li>\n</ul>\n<h3>4. CI의 과정</h3>\n<ul>\n<li>코드 변경: 개발자가 코드에 변경 사항을 추가하고 이를 버전 관리 시스템(예: Git)에 커밋합니다.</li>\n<li>자동 빌드: 커밋된 코드가 CI 서버에 의해 자동으로 빌드됩니다.</li>\n<li>자동 테스트: 빌드된 코드에 대해 자동화된 테스트가 실행되어 코드의 안정성을 검증합니다.</li>\n<li>피드백: 빌드 및 테스트 결과가 개발자에게 즉시 피드백으로 제공되어, 문제를 빠르게 인지하고 수정할 수 있습니다.</li>\n</ul>\n<h2>Github Action 선택 이유</h2>\n<p>Github Action을 선택한 이유는 프로젝트 특성상 Jenkins의 장점이 발휘될 여지가 적고 오히려 Github Action의 장점이 크게 부각될 여지가 있기 때문입니다.</p>\n<p>현재 진행하고 있는 프로젝트의 특징은 아래와 같습니다.</p>\n<ul>\n<li>Github 기반</li>\n<li>복잡하지 않은 CI/CD 파이프라인</li>\n<li>제한된 서버 비용</li>\n</ul>\n<h3>Jenkins의 장점</h3>\n<ul>\n<li>복잡한 CI/CD 파이프라인에 특화되어 다양한 커스터마이징 가능</li>\n<li>수 천개의 플러그인을 통한 높은 확장성</li>\n</ul>\n<h3>Jenkins의 단점</h3>\n<ul>\n<li>추가적인 서버 비용, 유지보수 비용</li>\n<li>Github와의 추가적인 연동 필요</li>\n<li>직관적이지 않은 UI와 높은 설정 복잡도</li>\n<li>플러그인에 대한 의존성</li>\n</ul>\n<h3>Github Action의 장점</h3>\n<ul>\n<li>깃허브 클라우드 기반: public 저장소의 경우 추가적인 서버비용이 발생하지 않습니다.</li>\n<li>Github와의 연동이 편이</li>\n<li>비교적 쉬운 설정</li>\n<li>docker의 쉬운 사용</li>\n</ul>\n<p>즉 정리하자면 Jenkins를 활용하기에 지금 프로젝트는 아직 초기 개발 상태이기 때문에 복잡한 CI/CD 설정이 필요하지 않고 docker을 사용하며 서버비용이 제한되어 있는 상황이기 때문에 Github Action을 선택하게 되었습니다. 추후에 프로젝트 규모가 커져 CI/CD 파이프라인의 좀 더 세밀한 커스터마이징이 필요해진다면 그 때 Jenkins CI를 고려해볼만 할 것 같습니다.</p>\n<h2>Github Action CI 설정</h2>\n<p>현재 프로젝트에서 CI를 위해 필요한 것은 테스트와 빌드뿐이었기 때문에 설정 자체는 어렵지 않았습니다. 오히려 Jenkins CI보다 매우 간편해서 놀랐습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> CI to develop\n\n<span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>develop<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>develop<span class=\"token punctuation\">]</span>\n\n<span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest\n\n    <span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up JDK 17\n        <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>java@v3\n        <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">java-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"17\"</span>\n          <span class=\"token key atrule\">distribution</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"temurin\"</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Grant execute permission for gradlew\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> chmod +x gradlew\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and test with Gradle\n        <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew clean build</code></pre></div>\n<h3>1. WorkFlow</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> CI to develop</code></pre></div>\n<ul>\n<li>워크플로우는 여러 Job으로 구성되고, Event에 의해 트리거될 수 있는 자동화된 프로세스입니다.</li>\n<li>name: 이 워크플로우의 이름을 정의합니다. GitHub Actions UI에서 이 이름으로 워크플로우를 식별할 수 있습니다.</li>\n</ul>\n<h3>2. Event</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">on</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">push</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>develop<span class=\"token punctuation\">]</span>\n  <span class=\"token key atrule\">pull_request</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">branches</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span>develop<span class=\"token punctuation\">]</span></code></pre></div>\n<ul>\n<li>Workflow를 Trigger(실행)하는 특정 활동이나 규칙을 얘기합니다.</li>\n<li>다음과 같은 상황에서 사용됩니다.\n<ul>\n<li>특정 브랜치로 Push</li>\n<li>특정 브랜치로 Pull Request</li>\n<li>특정 시간대에 반복(Cron)</li>\n<li>Webhook을 사용해 외부 이벤트를 통해 실행</li>\n</ul>\n</li>\n</ul>\n<h3>3. Job</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">jobs</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">build</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runs-on</span><span class=\"token punctuation\">:</span> ubuntu<span class=\"token punctuation\">-</span>latest</code></pre></div>\n<ul>\n<li>Job은 여러 Step으로 구성되고, 가상 환경의 인스턴스에서 실행됩니다.</li>\n<li>다른 Job에 의존 관계를 가질 수 있고, 독립적으로 병렬 실행도 가능합니다.</li>\n<li>runs-on: 이 작업이 실행될 환경을 정의합니다. 여기서는 ubuntu-latest를 사용하여 최신 버전의 Ubuntu 환경에서 작업을 실행합니다.</li>\n</ul>\n<h3>4. Steps</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">steps</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3</code></pre></div>\n<ul>\n<li>Task들의 집합으로, 커맨드를 날리거나 action을 실행할 수 있습니다.</li>\n</ul>\n<h4>단계별 설명</h4>\n<h5>1. 저장소 Checkout</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/checkout@v3</code></pre></div>\n<ul>\n<li>GitHub 리포지토리의 코드 파일을 현재 작업 환경으로 체크아웃(복제)합니다. actions/checkout 액션을 사용하여, 리포지토리의 코드를 워크플로우 환경에 다운로드합니다. 이는 Jenkins와 대비되는 Github만의 강력한 통합 기능이기도 합니다.</li>\n</ul>\n<h5>2. JDK 17 세팅</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Set up JDK 17\n  <span class=\"token key atrule\">uses</span><span class=\"token punctuation\">:</span> actions/setup<span class=\"token punctuation\">-</span>java@v3\n  <span class=\"token key atrule\">with</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">java-version</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"17\"</span>\n    <span class=\"token key atrule\">distribution</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"temurin\"</span></code></pre></div>\n<ul>\n<li>actions/setup-java 액션을 사용하여, Java Development Kit (JDK) 17을 설치하고 사용할 수 있도록 환경을 설정합니다. distribution: \"temurin\"은 Temurin(OpenJDK 배포판)을 사용한다는 것을 의미합니다.</li>\n</ul>\n<h5>3. gradlew에 실행권한 부여</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Grant execute permission for gradlew\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> chmod +x gradlew</code></pre></div>\n<ul>\n<li>gradlew 파일에 실행 권한을 부여합니다.</li>\n</ul>\n<h5>4. Gradle 빌드&#x26;테스트</h5>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Build and test with Gradle\n  <span class=\"token key atrule\">run</span><span class=\"token punctuation\">:</span> ./gradlew clean build</code></pre></div>\n<ul>\n<li>빌드 및 테스트를 실행합니다.</li>\n</ul>\n<h2>결론</h2>\n<p>이렇게 develop 브랜치로의 CI의 성공적인 구현을 마쳤습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6241824453e7fb0afefc1343aee6d27e/c7bb6/mall3-ci-success-result.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB7ElEQVR42o2SW2/TQBCF8//5CQiJl75VCCohQBVSpb4ghEgEpUlpq8aJL/F1ba/3aseH2XVoCg+IlT7Pjrw+njk7s5P5Gzy7eI44jrEONthGETbbEMFmi5I1KEWPVhqk3YCM4FJjvx+IPTFOcRwxYlqzkRLb9xCCo6wYhJToKXcYY9GRmFQGnbIQ2kIR2hj/zlgLSwzDAKfjmL1dXWARXSOpcy/WdhzKaNg9iRLDkziMh3jADlQICTt0b6cK59ESi3iJ78ENom2M+4c1qrqhSjQ6Iak6ilIRAlwoFLxHTmRtj7Tp8ZAbT0OdeEH36LRCnOXkX4IkLcAa7j+W1N7fCNVT+xNuz6VF3VlwpY6Ct0WA+eYarGBIdimqqvIe/s9SdqSC9tSyOz9Ogi65+XlLYhl2WYGUSNIcecmo/RYNF/5ipD6iyDdppkupuEEt9LHCVgl8vfqGIIywDkOst5Fvf0MEYYIwTv0PnBUla/+wwwnnjQbrnrS8ZiFW4R1kJdCUjSeKYuR5jqosyILCV/Kv5SbBj41LgirGy8+vcPLlDC8+neJ08R6cS7BWesNZ54w3NFIKjB9y4eaxf0TSbI6/PYzqFGc/PuLD6hKvr87xbnmJuuXIa460lkiYpChQkJ9uvyOyRtJl6EekmTz8Bax5SSFblkLDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"result\"\n        title=\"\"\n        src=\"/static/6241824453e7fb0afefc1343aee6d27e/f058b/mall3-ci-success-result.png\"\n        srcset=\"/static/6241824453e7fb0afefc1343aee6d27e/c26ae/mall3-ci-success-result.png 158w,\n/static/6241824453e7fb0afefc1343aee6d27e/6bdcf/mall3-ci-success-result.png 315w,\n/static/6241824453e7fb0afefc1343aee6d27e/f058b/mall3-ci-success-result.png 630w,\n/static/6241824453e7fb0afefc1343aee6d27e/40601/mall3-ci-success-result.png 945w,\n/static/6241824453e7fb0afefc1343aee6d27e/78612/mall3-ci-success-result.png 1260w,\n/static/6241824453e7fb0afefc1343aee6d27e/c7bb6/mall3-ci-success-result.png 1986w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이로써 제 프로젝트는 develop 브랜치의 안정성을 지키면서도 Github Action이 제공하는 Event 기반 테스트와 빌드 자동화를 통해 별다른 노력 없이 CI에 들이는 시간 또한 효율적으로 아낄 수 있었습니다. 추후 release 브랜치로의 통합 과정에는 배포 자동화를 추가하고 가능하다면 qa테스트(부하테스트 등)까지 자동화하여 prod 레벨까지의 CD(Continuous Deployment)가\n가능해졌으면 하는 바람입니다.(그때는 Jenkins를 쓸 수도 있겠군요). 긴 글 읽어주셔서 감사합니다!</p>\n<h2>참고 자료</h2>\n<ul>\n<li><a href=\"https://docs.github.com/en/actions\">Github Action Docs</a></li>\n<li><a href=\"https://zzsza.github.io/development/2020/06/06/github-action\">깃허브 액션 사용법 정리</a></li>\n</ul>","frontmatter":{"title":"지속적인 통합 - Github Action을 통한 안정적인 통합 환경 구축","date":"August 28, 2024","description":"개인 프로젝트 mall-fashion 개선기 #3"}},"previous":{"fields":{"slug":"/develop/mall-fashion/mall2/"},"frontmatter":{"title":"효율적인 예외 처리 - RestControllerAdvice를 활용한 전역 예외 처리"}},"next":null},"pageContext":{"id":"def7a832-cd12-5dc5-acc1-b6fec414d568","previousPostId":"202822dd-9fea-53f8-96f4-7340f0c4a2ea","nextPostId":null}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}