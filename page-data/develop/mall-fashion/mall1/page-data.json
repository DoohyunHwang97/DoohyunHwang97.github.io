{"componentChunkName":"component---src-templates-blog-post-js","path":"/develop/mall-fashion/mall1/","result":{"data":{"site":{"siteMetadata":{"title":"Godo dev"}},"markdownRemark":{"id":"ef860038-9b4c-5b6d-be5b-a13467ef5006","excerpt":"…","html":"<h2>도입 배경</h2>\n<p>프로젝트가 커지면서 각 컨트롤러에서 개별적으로 <code class=\"language-text\">ResponseEntity</code>를 사용하여 응답을 반환하는 방식이 비효율적임을 느꼈습니다. 특히, 성공 응답과 예외 응답을 각각 다르게 처리하면서 코드가 중복되고 일관성이 떨어지기 시작했습니다. 이를 개선하기 위해 성공 응답과 예외 응답을 각각 <code class=\"language-text\">SuccessResult</code>와 <code class=\"language-text\">ErrorResult</code>라는 두 개의 클래스로 통일했습니다. 또한, 예외 응답의 경우 <code class=\"language-text\">ErrorEnum</code>이라는 열거형(enum)을 사용하여 에러 코드를 일관되게 관리할 수 있도록 재구성했습니다.</p>\n<h2>공통 응답 처리: SuccessResult와 ErrorResult</h2>\n<h3>1. 성공 응답: SuccessResult 클래스</h3>\n<p>성공적인 응답은 프로젝트 전반에 걸쳐 공통된 형태로 반환될 수 있도록 <code class=\"language-text\">SuccessResult</code> 클래스로 캡슐화했습니다. 이 클래스는 제네릭 타입을 사용하여 다양한 데이터 타입을 응답으로 포함할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">SuccessResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">T</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">T</span> response<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Builder</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">SuccessResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">T</span> response<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>response <span class=\"token operator\">=</span> response<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>제네릭 타입 T: 성공 응답이 포함할 수 있는 데이터 타입을 유연하게 설정할 수 있습니다.</li>\n<li>Builder 패턴: 객체를 생성할 때 보다 읽기 쉽게 코드를 작성할 수 있게 도와줍니다.</li>\n</ul>\n<h3>2. 예외 응답: ErrorResult 클래스</h3>\n<p>예외 응답을 일관되게 처리하기 위해 <code class=\"language-text\">ErrorResult</code> 클래스를 사용했습니다. 이 클래스는 에러 코드와 메시지를 포함하며, 프로젝트의 다양한 예외 상황에 대한 정보를 제공합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ErrorResult</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> code<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@Builder</span>\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">ErrorResult</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorEnum</span> errorEnum<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code <span class=\"token operator\">=</span> errorEnum<span class=\"token punctuation\">.</span><span class=\"token function\">getCode</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> errorEnum<span class=\"token punctuation\">.</span><span class=\"token function\">getMessage</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>에러코드와 메시지: 각각의 예외에 대해 고유한 에러코드와 메시지를 포함합니다.</li>\n<li>Builder 패턴: ErrorEnum을 통해 에러 정보를 설정할 수 있습니다.</li>\n</ul>\n<h2>예외 관리: ErrorEnum을 이용한 재사용 가능한 에러 정의</h2>\n<p>프로젝트 내에서 발생할 수 있는 다양한 예외 상황을 관리하기 위해 <code class=\"language-text\">ErrorEnum</code>을 도입했습니다. 각 예외 상황에 대해 고유한 코드와 메시지를 정의하여, 예외 상황이 발생할 때 일관된 응답을 보장할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">enum</span> <span class=\"token class-name\">ErrorEnum</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 시스템 예외</span>\n    <span class=\"token function\">INVALID_REQUEST</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">BAD_REQUEST</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"잘못된 요청입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">FORBIDDEN_REQUEST</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UNAUTHORIZED</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"허용되지 않은 요청입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">FAILED_INTERNAL_SYSTEM_PROCESSING</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INTERNAL_SERVER_ERROR</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"내부 시스템 처리 작업이 실패했습니다. 잠시 후 다시 시도해주세요.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">NOT_FOUND</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">NOT_FOUND</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"존재하지 않는 정보 입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n\n    <span class=\"token comment\">// 사용자 예외</span>\n    <span class=\"token function\">INACTIVATED_USER</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">UNAUTHORIZED</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"비활성화된 계정입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">USERNAME_DUPLICATED</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONFLICT</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"이미 등록된 아이디입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function\">EMAIL_DUPLICATED</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span><span class=\"token punctuation\">.</span><span class=\"token constant\">CONFLICT</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"이미 등록된 이메일입니다.\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n    <span class=\"token comment\">// ... 기타 예외들</span>\n    <span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">HttpStatus</span> status<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> code<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">ErrorEnum</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">HttpStatus</span> status<span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span> message<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>status <span class=\"token operator\">=</span> status<span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>code <span class=\"token operator\">=</span> <span class=\"token function\">name</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>message <span class=\"token operator\">=</span> message<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">HttpStatus</code>와 함께 사용: 각 예외는 적절한 HTTP 상태 코드를 포함합니다.</li>\n<li>코드와 메시지의 재사용: 여러 컨트롤러에서 일관되게 예외 처리를 할 수 있습니다.</li>\n</ul>\n<h2>ResponseEntity의 활용</h2>\n<p><code class=\"language-text\">ResponseEntity</code>는 스프링 프레임워크에서 응답을 정의할 때 자주 사용되는 클래스입니다. 이 클래스는 HTTP 응답 상태 코드, 헤더, 그리고 본문을 포함할 수 있어 매우 유용합니다.</p>\n<p>프로젝트에서 <code class=\"language-text\">ResponseEntity</code>는 주로 예외 응답을 반환할 때 사용되었습니다. 예외 발생 시 <code class=\"language-text\">ErrorResult</code> 객체와 함께 적절한 HTTP 상태 코드를 포함하여 클라이언트에 응답을 반환할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">ErrorResult</span><span class=\"token punctuation\">></span></span> <span class=\"token function\">handleException</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">SomeException</span> e<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">ErrorResult</span> errorResult <span class=\"token operator\">=</span> <span class=\"token class-name\">ErrorResult</span><span class=\"token punctuation\">.</span><span class=\"token function\">builder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                                         <span class=\"token punctuation\">.</span><span class=\"token function\">errorEnum</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">ErrorEnum</span><span class=\"token punctuation\">.</span><span class=\"token constant\">INVALID_REQUEST</span><span class=\"token punctuation\">)</span>\n                                         <span class=\"token punctuation\">.</span><span class=\"token function\">build</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ResponseEntity</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span>errorResult<span class=\"token punctuation\">,</span> errorEnum<span class=\"token punctuation\">.</span><span class=\"token function\">getStatus</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>HTTP 상태 코드 포함: 예외 상황에 따라 적절한 상태 코드가 자동으로 포함됩니다.</li>\n<li>유연한 응답 구성: ResponseEntity를 통해 헤더, 본문, 상태 코드 등을 자유롭게 설정할 수 있습니다.</li>\n</ul>\n<h2>결론</h2>\n<p>공통 응답 API를 도입함으로써 프로젝트의 코드 일관성과 유지 보수성이 크게 향상되었습니다. 성공적인 응답과 예외적인 응답을 각각 SuccessResult와 ErrorResult 클래스로 통일함으로써, 보다 명확하고 직관적인 코드를 작성할 수 있게 되었습니다. 또한, ErrorEnum을 사용하여 예외를 관리함으로써 코드의 재사용성을 높이고, ResponseEntity를 통해 유연하게 응답을 제어할 수 있었습니다.</p>\n<p>이러한 접근 방식을 통해 프로젝트의 응답 구조가 보다 체계적으로 정리되었으며, 이를 통해 클라이언트와의 통신이 더욱 명확해지고 오류 처리가 간소화되었습니다. 앞으로도 이 구조를 확장하여 다양한 상황에 대응할 수 있는 공통 응답 API를 만들어 나갈 수 있을 것입니다.</p>\n<h2>참고 자료</h2>\n<ul>\n<li><a href=\"https://mangkyu.tistory.com/205\">@RestControllerAdvice를 이용한 Spring 예외 처리 방법</a></li>\n</ul>\n<h2>프로젝트 링크</h2>\n<ul>\n<li><a href=\"https://github.com/f-lab-edu/shopping-mall-fashion\">mall-fashion</a></li>\n</ul>","frontmatter":{"title":"공통 응답 API 구현 - 프로젝트에서의 효율적이고 일관된 응답 관리","date":"August 26, 2024","description":"개인 프로젝트 mall-fashion 개선기 #1"}},"previous":null,"next":{"fields":{"slug":"/develop/mall-fashion/mall2/"},"frontmatter":{"title":"효율적인 예외 처리 - RestControllerAdvice를 활용한 전역 예외 처리"}}},"pageContext":{"id":"ef860038-9b4c-5b6d-be5b-a13467ef5006","previousPostId":null,"nextPostId":"202822dd-9fea-53f8-96f4-7340f0c4a2ea"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}